# ä»‹ç»

[bpmn-js](https://github.com/bpmn-io/bpmn-js) æ˜¯ BPMN 2.0 å‘ˆç°å·¥å…·åŒ…å’Œ Web å»ºæ¨¡å™¨ã€‚å®ƒæ˜¯ç”¨ JavaScript ç¼–å†™çš„ï¼Œå°† BPMN 2.0 å›¾è¡¨åµŒå…¥åˆ°ç°ä»£æµè§ˆå™¨ä¸­ï¼Œå¹¶ä¸”ä¸éœ€è¦æœåŠ¡å™¨åç«¯ã€‚è¿™æ ·å¯ä»¥è½»æ¾å°†å…¶åµŒå…¥åˆ°ä»»ä½• Web åº”ç”¨ç¨‹åºä¸­ã€‚

è¯¥åº“ä»¥æ—¢å¯ä»¥æŸ¥çœ‹å™¨åˆå¯ä»¥æ˜¯ Web å»ºæ¨¡å™¨çš„æ–¹å¼æ„å»ºã€‚ä½¿ç”¨ [viewer](https://github.com/bpmn-io/bpmn-js-examples/tree/master/url-viewer) å°† BPMN 2.0 åµŒå…¥åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ï¼Œ[å¹¶ç”¨æ‚¨çš„æ•°æ®ä¸°å¯Œå®ƒ](https://github.com/bpmn-io/bpmn-js-examples/tree/master/overlays)ã€‚ä½¿ç”¨ [modeler](https://github.com/bpmn-io/bpmn-js-examples/tree/master/modeler) åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨åˆ›å»º BPMN 2.0 å›¾è¡¨ã€‚

äº†è§£å†…éƒ¨ä¹‹å‰å…ˆäº†è§£ä¸‹å¤–è§‚ï¼š

![bpmnLayout](./img/bpmnLayout.png)

ä¸‹é¢ä»‹ç»åº“å†…éƒ¨çš„ä¸€äº›è§è§£ï¼Œå³æœ‰åŠ©äºå…¶é«˜åº¦æ¨¡å—åŒ–å’Œå¯æ‰©å±•ç»“æ„çš„ç»„ä»¶ã€‚

## äº†è§£ bpmn-js å†…éƒ¨

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œbpmn-js å»ºç«‹åœ¨ä¸¤ä¸ªé‡è¦çš„åº“ä¹‹ä¸Šï¼šdiagram-js å’Œ bpmn-moddleã€‚

bpmn-js ä½“ç³»ç»“æ„
![overview](./img/overview.svg)

æˆ‘ä»¬ä½¿ç”¨ [diagram-js](https://github.com/bpmn-io/diagram-js) ç»˜åˆ¶å›¾å½¢å’Œè¿çº¿ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸è¿™äº›å›¾å½¢å…ƒç´ è¿›è¡Œäº¤äº’çš„æ–¹æ³•ï¼Œä»¥åŠè¯¸å¦‚å åŠ å±‚ä¹‹ç±»çš„å…¶ä»–å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ„å»ºåŠŸèƒ½å¼ºå¤§çš„ BPMN æŸ¥çœ‹å™¨ã€‚å¯¹äºè¯¸å¦‚å»ºæ¨¡ä¹‹ç±»çš„é«˜çº§ç”¨ä¾‹ï¼Œå®ƒæä¾›äº†ä¸Šä¸‹æ–‡å†…å®¹é¢æ¿ï¼Œè°ƒè‰²æ¿å’Œé‡åš/æ’¤æ¶ˆä¹‹ç±»çš„åŠŸèƒ½ã€‚

[bpmn-moddle](https://github.com/bpmn-io/bpmn-moddle) çŸ¥é“ [BPMN 2.0](https://www.omg.org/spec/BPMN/2.0/) æ ‡å‡†ä¸­å®šä¹‰çš„ BPMN 2.0 å…ƒæ¨¡å‹ã€‚å®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿè¯»å†™ BPMN 2.0 æ¶æ„å…¼å®¹çš„ XML æ–‡æ¡£ï¼Œå¹¶è®¿é—®åœ¨å›¾ä¸Šç»˜åˆ¶çš„å›¾å½¢å’Œè¿çº¿èƒŒåçš„ BPMN ç›¸å…³ä¿¡æ¯ã€‚

åœ¨è¿™ä¸¤ä¸ªåº“çš„åŸºç¡€ä¸Šï¼Œ[bpmn-js](https://github.com/bpmn-io/bpmn-js) å®šä¹‰äº† BPMN ç»†èŠ‚ï¼Œä¾‹å¦‚å¤–è§‚ï¼Œå»ºæ¨¡è§„åˆ™å’Œå·¥å…·ï¼ˆå³è°ƒè‰²æ¿ï¼‰ã€‚åœ¨ä»¥ä¸‹æ®µè½ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»å„ä¸ªç»„ä»¶ã€‚

> ğŸ™‹â€â™‚ï¸ å¯ä»¥çŸ¥é“ bpmn-js æ„å»ºåœ¨ diagram-js å’Œ bpmn-moddle è¿™ä¸¤ä¸ªåº“ä¹‹ä¸Šï¼Œäº†è§£ä»–ä»¬çš„å…³ç³»èƒ½å¤Ÿå¾ˆå¥½çš„å¯¹ä»–ä»¬è¿›è¡Œè‡ªå®šä¹‰ã€‚

### å›¾äº¤äº’/å»ºæ¨¡ï¼ˆdiagram-jsï¼‰

åœ¨å†…éƒ¨ï¼Œ[diagram-js](https://github.com/bpmn-io/diagram-js) ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ¥è¿æ¥å’Œå‘ç°å›¾ç»„ä»¶ã€‚è¯¥æœºåˆ¶å»ºç«‹åœ¨ [didi](https://github.com/nikku/didi) ä¹‹ä¸Šã€‚

åœ¨ `diagram-js` çš„ä¸Šä¸‹æ–‡ä¸­è®¨è®ºæ¨¡å—æ—¶ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯æä¾›å‘½åæœåŠ¡åŠå…¶å®ç°çš„å•å…ƒã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼ŒæœåŠ¡æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–å®ä¾‹ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å…¶ä»–æœåŠ¡æ¥å®Œæˆå…³ç³»å›¾ä¸Šä¸‹æ–‡ä¸­çš„å·¥ä½œã€‚

> ğŸ™‹â€â™‚ï¸ æ˜¯çš„ï¼Œå¤§éƒ¨åˆ†çš„è‡ªå®šä¹‰éƒ½æ˜¯åŸºäºæ­¤æ¥å®Œæˆçš„ï¼Œç†è§£å¾ˆé‡è¦ï¼
> æ‰€è°“è‡ªå®šä¹‰å°±æ˜¯é‡å†™æˆ–è€…è¦†ç›–æŸä¸ªåŠŸèƒ½çš„æ¨¡å—æˆ–è€…æ–¹æ³•

ä¸‹é¢æ˜¾ç¤ºäº†ä¸€ä¸ªä¸ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æŒ‚é’©çš„æœåŠ¡ã€‚å®ƒé€šè¿‡å¦ä¸€ä¸ªæ ‡å‡†æœåŠ¡å·¥å…· eventBus æ³¨å†Œä¸€ä¸ªäº‹ä»¶ï¼š

```js
function MyLoggingPlugin(eventBus) {
  eventBus.on('element.changed', function(event) {
    console.log('element ', event.element, ' changed')
  })
}

// ensure the dependency names are still available after minification
MyLoggingPlugin.$inject = ['eventBus']
```

æˆ‘ä»¬å¿…é¡»ä½¿ç”¨æ¨¡å—å®šä¹‰ä»¥å”¯ä¸€åç§°å‘å¸ƒæœåŠ¡

```js
import CoreModule from 'diagram-js/lib/core'

// export as module
export default {
  __depends__: [CoreModule], // {2}
  __init__: ['myLoggingPlugin'], // {3}
  myLoggingPlugin: ['type', MyLoggingPlugin] // {1}
}
```

è¯¥å®šä¹‰å‘Šè¯‰ DI åŸºç¡€è®¾æ–½ï¼Œè¯¥æœåŠ¡ç§°ä¸º `myloggingpluging{1}`ï¼Œå®ƒä¾èµ–äº `diagram-js` æ ¸å¿ƒæ¨¡å—{2}ï¼Œå¹¶ä¸”åº”åœ¨åˆ›å»ºå…³ç³»å›¾æ—¶åˆå§‹åŒ–è¯¥æœåŠ¡{3}ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [didi](https://github.com/nikku/didi/blob/master/README.md) æ–‡æ¡£

æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ diagram-jsï¼Œä¼ é€’æˆ‘ä»¬çš„è‡ªå®šä¹‰æ¨¡å—ï¼š

```js
import MyLoggingModule from 'path-to-my-logging-module'

var diagram = new Diagram({
  modules: [MyLoggingModule]
})
```

æ’å…¥æ¨¡å—åˆ° bpmn-jsï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ additionalModules é€‰é¡¹ï¼Œå¦‚[æ‰©å±•å»ºæ¨¡è€…éƒ¨åˆ†](https://bpmn.io/toolkit/bpmn-js/walkthrough/#extend-the-modeler)ã€‚

#### æ ¸å¿ƒæœåŠ¡

[diagram-js æ ¸å¿ƒ](https://github.com/bpmn-io/diagram-js/tree/master/lib/core)æ˜¯å›´ç»•è®¸å¤šåŸºæœ¬æœåŠ¡æ„å»ºçš„ï¼š

- [`Canvas`](https://github.com/bpmn-io/diagram-js/blob/master/lib/core/Canvas.js) - æä¾›äº† api ç”¨äºæ·»åŠ å’Œåˆ é™¤å›¾å½¢å…ƒç´ ï¼›å¤„ç†ç”Ÿå‘½å‘¨æœŸçš„å…ƒç´ ï¼Œå¹¶æä¾› api æ¥ç¼©æ”¾å’Œæ»šåŠ¨ã€‚

- [`EventBus`](https://github.com/bpmn-io/diagram-js/blob/master/lib/core/EventBus.js) -
  è¿™ä¸ªåº“ä½¿ç”¨ fire å’Œ forget ç­–ç•¥çš„å…¨å±€é€šä¿¡ã€‚ç›¸å…³æ¨¡å—å¯ä»¥è®¢é˜…çš„å„ç§äº‹ä»¶ï¼Œå¹¶åœ¨å®ƒä»¬è§¦å‘åç«‹å³é‡‡å–è¡ŒåŠ¨ã€‚`EventBus` å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£è€¦é—®é¢˜ï¼Œå¹¶ä¸”æ¨¡å—åŒ–åŠŸèƒ½ã€‚
- [`ElementFactory`](https://github.com/bpmn-io/diagram-js/blob/master/lib/core/ElementFactory.js) - ç”¨äºæ ¹æ® diagram-js çš„å†…éƒ¨æ•°æ®æ¨¡å‹åˆ›å»ºå›¾å½¢å’Œè¿çº¿çš„å·¥å‚ã€‚

- [`ElementRegistry`](https://github.com/bpmn-io/diagram-js/blob/master/lib/core/ElementRegistry.js) - çŸ¥é“æ·»åŠ åˆ°å›¾è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶æä¾› API æ¥æ£€ç´¢å…ƒç´ ï¼ˆé€šè¿‡ idï¼‰åŠå…¶å›¾å½¢åŒ–è¡¨ç¤ºã€‚

- [`GraphicsFactory`](https://github.com/bpmn-io/diagram-js/blob/master/lib/core/GraphicsFactory.js) - è´Ÿè´£åˆ›å»ºå›¾å½¢å’Œè¿çº¿çš„å›¾å½¢è¡¨ç¤ºã€‚å®é™…çš„å¤–è§‚ç”±æ¸²æŸ“å™¨å®šä¹‰ï¼Œå³ [draw module](https://github.com/bpmn-io/diagram-js/tree/master/lib/draw) æ¨¡å—å†…çš„ [DefaultRenderer](https://github.com/bpmn-io/diagram-js/blob/master/lib/draw/DefaultRenderer.js)

#### æ•°æ®æ¨¡å‹

åœ¨å†…éƒ¨ï¼Œdiagramjs å®ç°äº†ä¸€ä¸ªç”±å›¾å½¢å’Œè¿çº¿ç»„æˆçš„ç®€å•æ•°æ®æ¨¡å‹ã€‚

![data-model.png](./img/data-model.png)

ä¸€ä¸ªå›¾å½¢æœ‰`çˆ¶å¯¹è±¡`ã€`å­å¯¹è±¡é›†åˆ`ä»¥åŠ`ä¼ å…¥`å’Œ`ä¼ å‡º`è¿çº¿çš„é›†åˆã€‚

ä¸€ä¸ªè¿çº¿æœ‰ä¸€ä¸ª`çˆ¶å¯¹è±¡`ä»¥åŠ`æ¥æº`å’Œ`ç›®çš„`ï¼ŒæŒ‡å‘ä¸€ä¸ªå›¾å½¢ã€‚

[ElementRegistry](https://github.com/bpmn-io/diagram-js/blob/master/lib/core/ElementRegistry.js) è´Ÿè´£æ ¹æ®è¯¥æ¨¡å‹åˆ›å»ºå›¾å½¢å’Œè¿çº¿ã€‚åœ¨å»ºæ¨¡è¿‡ç¨‹ä¸­ï¼Œ[Modeling æœåŠ¡](https://github.com/bpmn-io/diagram-js/blob/master/lib/features/modeling/Modeling.js)å°†æ ¹æ®ç”¨æˆ·æ“ä½œæ›´æ–°å…ƒç´ å…³ç³»ã€‚

#### è¾…åŠ©æœåŠ¡ï¼ˆå³å·¥å…·ç®±ï¼‰

é™¤äº†æ•°æ®æ¨¡å‹åŠå…¶æ ¸å¿ƒæœåŠ¡ä¹‹å¤–ï¼Œdiagram-js è¿˜æä¾›äº†ä¸€ä¸ªä¸°å¯Œçš„å·¥å…·ç®±ï¼Œå…¶ä¸­åŒ…å«å…¶ä»–å¸®åŠ©ç¨‹åºã€‚

- [`CommandStack`](https://github.com/bpmn-io/diagram-js/blob/master/lib/command/CommandStack.js) - è´Ÿè´£å»ºæ¨¡è¿‡ç¨‹ä¸­çš„é‡åšå’Œæ’¤æ¶ˆã€‚
- [`ContextPad`](https://github.com/bpmn-io/diagram-js/blob/master/lib/features/context-pad/ContextPad.js) - å›´ç»•æä¾›å…ƒç´ çš„ä¸Šä¸‹æ–‡æ“ä½œã€‚
- [`Overlays`](https://github.com/bpmn-io/diagram-js/blob/master/lib/features/overlays/Overlays.js) - æä¾›äº†ç”¨äºå›¾è¡¨å…ƒç´ çš„é™„åŠ ä¿¡æ¯ api ã€‚
- [`Modeling`](https://github.com/bpmn-io/diagram-js/blob/master/lib/features/modeling/Modeling.js) - æä¾›ç”¨äºæ›´æ–°ç”»å¸ƒä¸Šå…ƒç´ çš„ APIï¼ˆç§»åŠ¨ã€åˆ é™¤ï¼‰- ğŸ™‹â€â™‚ï¸ è¿™ä¸ªå¸¸ç”¨
- [`Palette`](https://github.com/bpmn-io/diagram-js/blob/master/lib/features/palette/Palette.js) - å·¦ä¾§å·¥å…·æ 
- ...

#### BPMN å…ƒæ¨¡å‹ï¼ˆbpmn-moddleï¼‰

[bpmn-moddle](https://github.com/bpmn-io/bpmn-moddle) å°è£…äº† BPMN 2.0 å…ƒæ¨¡å‹ï¼Œå¹¶ä¸ºæˆ‘ä»¬æä¾›äº†è¯»å†™ BPMN 2.0 XML æ–‡æ¡£çš„ä¾¿åˆ©ã€‚å¯¼å…¥æ—¶ï¼Œå®ƒå°† XML æ–‡æ¡£è§£æä¸º JavaScript å¯¹è±¡æ ‘ã€‚è¯¥æ ‘åœ¨å»ºæ¨¡æœŸé—´è¿›è¡Œäº†ç¼–è¾‘å’ŒéªŒè¯ï¼Œç„¶åä¸€æ—¦ç”¨æˆ·å¸Œæœ›ä¿å­˜è¯¥å›¾ï¼Œå°±å°†å…¶å¯¼å‡ºå› BPMN 2.0 XMLã€‚å› ä¸º bpmn-moddle å°è£…äº†æœ‰å…³ BPMN çš„çŸ¥è¯†ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿåœ¨å¯¼ â€‹â€‹ å…¥å’Œå»ºæ¨¡æœŸé—´è¿›è¡ŒéªŒè¯ã€‚æ ¹æ®ç»“æœ â€‹â€‹ï¼Œæˆ‘ä»¬å¯ä»¥çº¦æŸæŸäº›å»ºæ¨¡æ“ä½œï¼Œå¹¶å‘ç”¨æˆ·è¾“å‡ºæœ‰ç”¨çš„é”™è¯¯æ¶ˆæ¯å’Œè­¦å‘Šã€‚

å°±åƒ bpmn-js ä¸€æ ·ï¼Œbpmn-moddle çš„åŸºç¡€å»ºç«‹åœ¨ä¸¤ä¸ªåº“çš„åŸºç¡€ä¸Šï¼š

- [moddle](https://github.com/bpmn-io/moddle) æä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹æ³•æ¥å®šä¹‰ JavaScript ä¸­çš„[å…ƒæ¨¡å‹](https://en.wikipedia.org/wiki/Metamodeling)
- [moddle-xml](https://github.com/bpmn-io/moddle-xml) åŸºäº [moddle](https://github.com/bpmn-io/moddle) è¯»å†™ XML æ–‡æ¡£

å®è´¨ä¸Šï¼Œ[bpmn-moddle](https://github.com/bpmn-io/bpmn-moddle) å°† BPMN è§„èŒƒæ·»åŠ ä¸ºå…ƒæ¨¡å‹ï¼Œå¹¶æä¾›äº†ç”¨äº BPMN æ¨¡å¼éªŒè¯çš„ç®€å•æ¥å£ã€‚ä»åº“çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒæä¾›äº†ä»¥ä¸‹ APIï¼š

[fromXML](https://github.com/bpmn-io/bpmn-moddle/blob/master/lib/bpmn-moddle.js#L38) -ä»ç»™å®šçš„ XML å­—ç¬¦ä¸²åˆ›å»º BPMN æ ‘
[toXML](https://github.com/bpmn-io/bpmn-moddle/blob/master/lib/bpmn-moddle.js#L65) -å°† BPMN å¯¹è±¡æ ‘å†™å…¥ BPMN 2.0 XML

BPMN å…ƒæ¨¡å‹å¯¹äº BPMN-js è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬éªŒè¯æ‰€ä½¿ç”¨çš„ bpmn2.0 æ–‡æ¡£ï¼Œæä¾›é€‚å½“çš„å»ºæ¨¡è§„åˆ™ï¼Œå¹¶å¯¼å‡ºæ‰€æœ‰ç¬¦åˆ BPMN å»ºæ¨¡è€…éƒ½èƒ½ç†è§£çš„æœ‰æ•ˆ BPMN æ–‡æ¡£ã€‚

### å°†äº‹ç‰©æ•´åˆåœ¨ä¸€èµ·ï¼ˆbpmn-jsï¼‰

æˆ‘ä»¬äº†è§£åˆ° [bpmn-js](https://github.com/bpmn-io/bpmn-js) æ„å»ºåœ¨ [diagram-js](https://github.com/bpmn-io/diagram-js) å’Œ [bpmn-moddle](https://github.com/bpmn-io/bpmn-moddle) ä¹‹ä¸Šã€‚å®ƒæŠŠä¸¤è€…è”ç³»åœ¨ä¸€èµ·ï¼Œå¹¶å¢åŠ äº† BPMN çš„å¤–è§‚ã€‚è¿™åŒ…æ‹¬ BPMN è°ƒè‰²æ¿ï¼ŒBPMN ä¸Šä¸‹æ–‡æ¿ä»¥åŠ BPMN 2.0 ç‰¹å®šè§„åˆ™ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è§£é‡Šå®ƒåœ¨å»ºæ¨¡çš„ä¸åŒé˜¶æ®µå¦‚ä½•å·¥ä½œã€‚

å½“æˆ‘ä»¬å¯¼å…¥ BPMN 2.0 æ–‡æ¡£æ—¶ï¼Œå®ƒä¼šé€šè¿‡ [bpmn-moddle](https://github.com/bpmn-io/bpmn-moddle) ä» XML è§£æåˆ°å¯¹è±¡æ ‘ä¸­ã€‚bpmn-js æ¸²æŸ“è¯¥æ ‘çš„æ‰€æœ‰å¯è§å…ƒç´ ï¼Œå³ï¼Œå®ƒåœ¨ç”»å¸ƒä¸Šåˆ›å»ºå„è‡ªçš„å½¢çŠ¶å’Œè¿æ¥ã€‚å› æ­¤ï¼Œå®ƒå°† BPMN å…ƒç´ å’Œå›¾å½¢å…ƒç´ è”ç³»åœ¨ä¸€èµ·ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™å°†ç”Ÿæˆä¸€ä¸ªå¼€å§‹äº‹ä»¶å½¢çŠ¶çš„ç»“æ„ã€‚

```js
{
  id: 'StartEvent_1',
  x: 100,
  y: 100,
  width: 50,
  height: 50,
  businessObject: {
    $attrs: Object
    $parent: {
      $attrs: Object
      $parent: ModdleElement
      $type: 'bpmn:Process'
      flowElements: Array[1]
      id: 'Process_1'
      isExecutable: false
    }
    $type: 'bpmn:StartEvent'
    id: 'StartEvent_1'
  }
}
}
```

> ğŸ™‹â€â™‚ï¸ è¿™æ˜¯ä¸€ä¸ª`å¼€å§‹èŠ‚ç‚¹`çš„è§£ææ•°æ®ï¼Œæ˜¯ BPMN è§£æ BPMN æ–‡ä»¶æˆ–è€… XML å¾—åˆ°çš„ï¼Œæè¿°äº†å®ƒæœ¬èº«çš„ä¿¡æ¯ä»¥åŠä¸å®ƒæœ‰å…³ç³»çš„å…¶ä»–èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚

æ‚¨å¯ä»¥é€šè¿‡ `businessObject` å±æ€§ä»æ¯ä¸ªå›¾å½¢å…ƒç´ è®¿é—®åŸºç¡€ BPMN ç±»å‹ã€‚

[bpmn-js](https://github.com/bpmn-io/bpmn-js) è¿˜é€šè¿‡çŸ¥é“äº†æ¯ä¸ª BPMN å…ƒç´ çš„å¤–è§‚ [BpmnRenderer](https://github.com/bpmn-io/bpmn-js/blob/master/lib/draw/BpmnRenderer.js)ã€‚é€šè¿‡æ’å…¥æ¸²æŸ“å‘¨æœŸï¼Œæ‚¨è¿˜å¯ä»¥å®šä¹‰å„ä¸ª BPMN å…ƒç´ çš„è‡ªå®šä¹‰è¡¨ç¤ºã€‚

å¯¼å…¥å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å»ºæ¨¡äº†ã€‚æˆ‘ä»¬ä½¿ç”¨è§„åˆ™æ¥å…è®¸æˆ–ç¦æ­¢æŸäº›å»ºæ¨¡æ“ä½œã€‚è¿™äº›è§„åˆ™ç”±å®šä¹‰ [BpmnRules](https://github.com/bpmn-io/bpmn-js/blob/master/lib/features/rules/BpmnRules.js)ã€‚æˆ‘ä»¬å°†è¿™äº›è§„åˆ™åŸºäº [OMG](https://www.omg.org/) å®šä¹‰çš„ BPMN 2.0 æ ‡å‡†ã€‚ä½†æ˜¯ï¼Œå¦‚å‰æ‰€è¿°ï¼Œå…¶ä»–äººä¹Ÿå¯èƒ½ä¼šå‚ä¸è§„åˆ™è¯„ä¼°ä»¥è´¡çŒ®ä¸åŒçš„è¡Œä¸ºã€‚

[modeling module](https://github.com/bpmn-io/bpmn-js/tree/master/lib/features/modeling)æ†ç»‘äº† bpmn2.0 ç›¸å…³çš„å»ºæ¨¡åŠŸèƒ½ã€‚å®ƒæ·»åŠ äº†ç‰¹å®šäº bpmn2.0 çš„å»ºæ¨¡è¡Œä¸ºï¼Œå¹¶è´Ÿè´£ä½¿ç”¨ç”¨æˆ·æ‰§è¡Œçš„æ¯ä¸ªå»ºæ¨¡æ“ä½œæ›´æ–° bpmn2.0 æ–‡æ¡£æ ‘ï¼ˆå‚è§ [BpmnUpdater](https://github.com/bpmn-io/bpmn-js/blob/master/lib/features/modeling/BpmnUpdater.js)ï¼‰ã€‚æŸ¥çœ‹å®ƒå¯ä»¥æ›´æ·±å…¥åœ°äº†è§£è§„åˆ™ã€è¡Œä¸ºå’Œ BPMN æ›´æ–°å‘¨æœŸã€‚

å½“çº¯ç²¹ä»åº“çš„è§’åº¦æ¥çœ‹ bpmn js æ—¶ï¼Œå€¼å¾—ä¸€æçš„æ˜¯å®ƒå¯ä»¥ç”¨åœ¨ä¸‰ä¸ªå˜ä½“ä¸­ï¼š

- [Viewer](https://github.com/bpmn-io/bpmn-js/blob/master/lib/Viewer.js) BPMN å›¾è¡¨æŸ¥çœ‹å™¨
- [NavigatedViewer](https://github.com/bpmn-io/bpmn-js/blob/master/lib/NavigatedViewer.js) åŒ…å«é¼ æ ‡å¯¼èˆªå·¥å…·çš„å›¾è¡¨æŸ¥çœ‹å™¨
- [Modeler](https://github.com/bpmn-io/bpmn-js/blob/master/lib/Modeler.js) BPMN å›¾è¡¨å»ºæ¨¡å™¨

[NavigatedViewer](https://github.com/bpmn-io/bpmn-js/blob/master/lib/NavigatedViewer.js) æ·»åŠ äº†ç”¨äºå¯¼èˆªç”»å¸ƒçš„æ¨¡å—ï¼Œ[Modeler](https://github.com/bpmn-io/bpmn-js/blob/master/lib/Modeler.js) æ·»åŠ äº†å¤§é‡ç”¨äºåˆ›å»ºã€ç¼–è¾‘ç”»å¸ƒä¸Šçš„å…ƒç´ å¹¶ä¸ä¹‹äº¤äº’çš„åŠŸèƒ½ã€‚

## æœ€å

ä»¥ä¸Šä»‹ç»äº† `bpmn-js` çš„ä¸¤ä¸ªåŸºç¡€ `diagram-js` ä»¥åŠ `bpmn-moddle`ï¼Œå¹¶æ¦‚è¿°äº† bpmn-js å¦‚ä½•å°†æ‰€æœ‰è¿™äº›éƒ½å¡åœ¨ä¸€èµ·ã€‚

æœ‰è®¸å¤šå…¶ä»–èµ„æºå¯ä»¥ä½¿æ‚¨è¿›ä¸€æ­¥å‘å±•ï¼š

- [ç¤ºä¾‹](https://github.com/bpmn-io/bpmn-js-examples)-å¤§é‡ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åµŒå…¥å’Œæ‰©å±• bpmn-jsã€‚
- æºä»£ç ï¼ˆ[bpmn-js](https://github.com/bpmn-io/bpmn-js)ï¼Œ[diagram-js](https://github.com/bpmn-io/diagram-js)ï¼‰-å¤§å¤šæœ‰æ®å¯æŸ¥ï¼›åº”è¯¥ç»™æ‚¨å…³äºè¿™ä¸ªåº“å†…éƒ¨çš„æ·±åˆ»è§è§£ã€‚
- [è®ºå›](https://forum.bpmn.io/c/developers)-è·å¾—ä½¿ç”¨å’Œæ‰©å±• bpmn-js çš„å¸®åŠ©çš„å¥½åœ°æ–¹ã€‚

---

# æ€»ç»“

ä»¥ä¸Šå†…å®¹æ¥è‡ª [https://bpmn.io/toolkit/bpmn-js/walkthrough/](https://bpmn.io/toolkit/bpmn-js/walkthrough/)ï¼Œæœ‰åšä¿®æ”¹ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚

ä¸»è¦å…³æ³¨

- [bpmn-js](https://github.com/bpmn-io/bpmn-js)
- [diagram-js](https://github.com/bpmn-io/diagram-js)

å¤§éƒ¨åˆ†éƒ½æ˜¯é€šè¿‡ä¿®æ”¹ä»–ä¿©çš„ä»£ç æ¥å®ç°è‡ªå®šä¹‰ä¸€äº›åŠŸèƒ½
æˆ‘ä»¬è¦çš„åŠŸèƒ½åŸºæœ¬éƒ½åœ¨ `lib/features/` æˆ–è€… `lib/core/` ä»¥åŠ `lib/draw/` ä¸­
è™½ç„¶å¯»æ‰¾å’Œé˜…è¯» BPMN çš„æ–‡æ¡£è‰°éš¾äº†ç‚¹ï¼Œä½†æ˜¯ä»–ä»¬çš„æ‰©å±•åšå¾—è¿˜æ˜¯å¾ˆæ£’çš„ï¼Œä»£ç å†™å¾—ä¹Ÿå¾ˆé€šä¿—æ˜“æ‡‚ã€‚

---

ä¸‹é¢å¯ä»¥å°è¯•ä¸€ä¸‹[è‡ªå®šä¹‰å·¥å…·æ ](./customPalette.md)

å®Œæ•´ç›®å½•ï¼š ğŸ‘‰ [ç‚¹å‡»è¿™é‡Œ](../README.md)
